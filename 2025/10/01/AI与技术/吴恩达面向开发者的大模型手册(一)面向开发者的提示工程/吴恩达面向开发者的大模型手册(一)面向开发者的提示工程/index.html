

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/images/avatar.jpg">
  <link rel="icon" href="/images/avatar.jpg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Peng Yue">
  <meta name="keywords" content="Axure/Figma、Xmind、SQL、Python/Java、Git、Visio、Tableau、Cursor、Gemini、Prompt Engineering、Dify、Coze、agent">
  
    <meta name="description" content="​        本书涵盖大模型应用开发的方方面面，相信通过本书的学习，即便没有丰富编程经验，也可以顺利入门大模型，开发出有实用价值的AI产品。我在第一部分跟着书，使用的是openai的gpt-4o-mini模型，在免费额度使用完后，重新用硅基流动的免费api，使用的是Qwen2.5-7B-Instruct模型，向量模型都使用的是下载到本地的小模型，如：BAAI&#x2F;bge-base-zh-">
<meta property="og:type" content="article">
<meta property="og:title" content="吴恩达面向开发者的大模型手册(一)面向开发者的提示工程">
<meta property="og:url" content="https://py0909.github.io/2025/10/01/AI%E4%B8%8E%E6%8A%80%E6%9C%AF/%E5%90%B4%E6%81%A9%E8%BE%BE%E9%9D%A2%E5%90%91%E5%BC%80%E5%8F%91%E8%80%85%E7%9A%84%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%89%8B%E5%86%8C(%E4%B8%80)%E9%9D%A2%E5%90%91%E5%BC%80%E5%8F%91%E8%80%85%E7%9A%84%E6%8F%90%E7%A4%BA%E5%B7%A5%E7%A8%8B/%E5%90%B4%E6%81%A9%E8%BE%BE%E9%9D%A2%E5%90%91%E5%BC%80%E5%8F%91%E8%80%85%E7%9A%84%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%89%8B%E5%86%8C(%E4%B8%80)%E9%9D%A2%E5%90%91%E5%BC%80%E5%8F%91%E8%80%85%E7%9A%84%E6%8F%90%E7%A4%BA%E5%B7%A5%E7%A8%8B/index.html">
<meta property="og:site_name" content="Peng Yue的产品思考博客">
<meta property="og:description" content="​        本书涵盖大模型应用开发的方方面面，相信通过本书的学习，即便没有丰富编程经验，也可以顺利入门大模型，开发出有实用价值的AI产品。我在第一部分跟着书，使用的是openai的gpt-4o-mini模型，在免费额度使用完后，重新用硅基流动的免费api，使用的是Qwen2.5-7B-Instruct模型，向量模型都使用的是下载到本地的小模型，如：BAAI&#x2F;bge-base-zh-">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://py0909.github.io/llmcookbook.jpg">
<meta property="article:published_time" content="2025-09-30T16:00:00.000Z">
<meta property="article:modified_time" content="2025-12-23T15:08:51.671Z">
<meta property="article:author" content="Peng Yue">
<meta property="article:tag" content="Prompt">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://py0909.github.io/llmcookbook.jpg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>吴恩达面向开发者的大模型手册(一)面向开发者的提示工程 - Peng Yue的产品思考博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"py0909.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Peng Yue的产品笔记</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E9%A1%B9%E7%9B%AE%E5%A4%8D%E7%9B%98/" target="_self">
                <i class="iconfont icon-ppt"></i>
                <span>项目复盘</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/AI%E4%B8%8E%E6%8A%80%E6%9C%AF/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>AI探索</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E4%BA%A7%E5%93%81%E6%8B%86%E8%A7%A3/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>产品拆解</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E6%96%B9%E6%B3%95%E8%AE%BA/" target="_self">
                <i class="iconfont icon-book-fill"></i>
                <span>方法论</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E5%8E%9F%E5%9E%8B%E8%AE%BE%E8%AE%A1/" target="_self">
                <i class="iconfont icon-pen"></i>
                <span>原型设计</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/llmcookbook.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="吴恩达面向开发者的大模型手册(一)面向开发者的提示工程"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Peng Yue
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-10-01 00:00" pubdate>
          2025年10月1日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          32k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          270 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        

      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">吴恩达面向开发者的大模型手册(一)面向开发者的提示工程</h1>
            
            
              <div class="markdown-body">
                
                <p>​        本书涵盖大模型应用开发的方方面面，相信通过本书的学习，即便没有丰富编程经验，也可以顺利入门大模型，开发出有实用价值的AI产品。我在第一部分跟着书，使用的是openai的gpt-4o-mini模型，在免费额度使用完后，重新用硅基流动的免费api，使用的是Qwen2.5-7B-Instruct模型，向量模型都使用的是下载到本地的小模型，如：BAAI&#x2F;bge-base-zh-v1.5 模型。另外，基于本书出的时候langchain版本刚刚发布，但是我仍然觉得这是一本很好的入门大语言模型的书籍。所以后面的部分，我借助API文档和Gemini，全部代码使用目前稳定的0.3版本来开发学习。</p>
<h1 id="第一部分-面向开发者的提示工程"><a href="#第一部分-面向开发者的提示工程" class="headerlink" title="第一部分 面向开发者的提示工程"></a>第一部分 面向开发者的提示工程</h1><h2 id="0-引言"><a href="#0-引言" class="headerlink" title="0.引言"></a>0.引言</h2><p>​	Prompt，提示，最初是 NLP 研究者为下游任务设计出来的一种任务专属的输入形式或模板，在 ChatGPT 引发大语言模型新时代之后，Prompt 即成为与大模型交互输入的代称。即我们一般<strong>将给大模型的输入称为 Prompt，将大模型返回的输出称为 Completion</strong>。</p>
<p>​	随着 ChatGPT 等 LLM（大语言模型）的出现，自然语言处理的范式正在由 Pretrain-Finetune（预训练-微调）向 Prompt Engineering（提示工程）演变。对于具有较强自然语言理解、生成能力，能够实现多样化任务处理的 LLM 来说，一个合理的 Prompt 设计极大地决定了其能力的上限与下限。<strong>Prompt Engineering，即是针对特定任务构造能充分发挥大模型能力的 Prompt 的技巧</strong>。要充分、高效地使用 LLM，Prompt Engineering 是必不可少的技能。</p>
<p>​	<strong>如何构造 Prompt 并基于 OpenAI 提供的 API 实现包括总结、推断、转换等多种常用功能</strong>，是入门 LLM 开发的第一步。</p>
<p>​	本部分的主要内容包括：书写 Prompt 的原则与技巧；文本总结（如总结用户评论）；文本推断（如情感分类、主题提取）；文本转换（如翻译、自动纠错）；扩展（如书写邮件）等。</p>
<p><strong>目录：</strong></p>
<ol>
<li>简介 Introduction @邹雨衡</li>
<li>Prompt 的构建原则 Guidelines @邹雨衡</li>
<li>如何迭代优化 Prompt Itrative @邹雨衡</li>
<li>文本总结 Summarizing @玉琳</li>
<li>文本推断 @长琴</li>
<li>文本转换 Transforming @玉琳</li>
<li>文本扩展 Expand @邹雨衡</li>
<li>聊天机器人 @长琴</li>
<li>总结 @长琴</li>
</ol>
<h2 id="01-简介"><a href="#01-简介" class="headerlink" title="01.简介"></a>01.简介</h2><p>​	我认为目的是将本书学到的技术应用于诸多应用程序上，使得LLM API能够让开发人员非常快地构建应用程序，甚至是懂业务流程的不会编程的产品经理也能开发出有用有趣的应用程序。</p>
<p>​	随着 LLM 的发展，其大致可以分为两种类型，<strong>基础 LLM</strong> 和<strong>指令微调（Instruction Tuned）LLM</strong>。<br>​	<strong>基础LLM</strong>是基于文本训练数据，训练出预测下一个单词能力的【概率】模型。其通常通过在互联网和其他来源的大量数据上训练，来确定紧接着出现的最可能的词。</p>
<p>​	<strong>指令微调 LLM</strong> 通过专门的训练，可以更好地理解并遵循指令。举个例子，当询问“法国的首都是什么？”时，这类模型很可能直接回答“法国的首都是巴黎”。指令微调 LLM 的训练通常基于预训练语言模型，先在大规模文本数据上进行<strong>预训练</strong>，掌握语言的基本规律。在此基础上进行进一步的训练与<strong>微调（finetune）</strong>，输入是指令，输出是对这些指令的正确回复。有时还会采用**RLHF（reinforcement learning from human feedback，人类反馈强化学习）**技术，根据人类对模型输出的反馈进一步增强模型遵循指令的能力。通过这种受控的训练过程。指令微调 LLM 可以生成对指令高度敏感、更安全可靠的输出，较少无关和损害性内容。</p>
<p>​	通过本章节，我学到了详细阐述提示词设计的三个关键原则：<strong>清晰明确</strong>、<strong>具体的指令</strong>和<strong>给予充足的思考时间</strong>。</p>
<h2 id="02-提示原则"><a href="#02-提示原则" class="headerlink" title="02.提示原则"></a>02.提示原则</h2><h3 id="一、原则一-编写清晰、具体的指令"><a href="#一、原则一-编写清晰、具体的指令" class="headerlink" title="一、原则一 编写清晰、具体的指令"></a>一、原则一 编写清晰、具体的指令</h3><h3 id="1-使用分隔符清晰地表示输入的不同部分"><a href="#1-使用分隔符清晰地表示输入的不同部分" class="headerlink" title="1. 使用分隔符清晰地表示输入的不同部分"></a>1. 使用分隔符清晰地表示输入的不同部分</h3><h3 id="2-寻求结构化的输出"><a href="#2-寻求结构化的输出" class="headerlink" title="2.寻求结构化的输出"></a>2.寻求结构化的输出</h3><h3 id="3-要求模型检查是否满足条件"><a href="#3-要求模型检查是否满足条件" class="headerlink" title="3.要求模型检查是否满足条件"></a>3.要求模型检查是否满足条件</h3><h3 id="4-提供少量实例"><a href="#4-提供少量实例" class="headerlink" title="4.提供少量实例"></a>4.提供少量实例</h3><h2 id="二、原则二-给模型思考的时间"><a href="#二、原则二-给模型思考的时间" class="headerlink" title="二、原则二 给模型思考的时间"></a>二、原则二 给模型思考的时间</h2><h3 id="1-指定完成任务所需的步骤"><a href="#1-指定完成任务所需的步骤" class="headerlink" title="1.指定完成任务所需的步骤"></a>1.指定完成任务所需的步骤</h3><h3 id="2-指导模型在下结论之前找出一个自己的解法"><a href="#2-指导模型在下结论之前找出一个自己的解法" class="headerlink" title="2.指导模型在下结论之前找出一个自己的解法"></a>2.指导模型在下结论之前找出一个自己的解法</h3><h2 id="三、局限性"><a href="#三、局限性" class="headerlink" title="三、局限性"></a>三、局限性</h2><h3 id="模型偶尔会生成一些看似真实实则编造的知识"><a href="#模型偶尔会生成一些看似真实实则编造的知识" class="headerlink" title="模型偶尔会生成一些看似真实实则编造的知识"></a>模型偶尔会生成一些看似真实实则编造的知识</h3><h3 id="幻觉”-Hallucination-，是语言模型的一大缺陷。"><a href="#幻觉”-Hallucination-，是语言模型的一大缺陷。" class="headerlink" title="幻觉”(Hallucination)，是语言模型的一大缺陷。"></a>幻觉”(Hallucination)，是语言模型的一大缺陷。</h3><p>在开始写代码前新建两个文件</p>
<p>1 .env文件用来存放：OPENAI_API_KEY</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">OPENAI_API_KEY=<span class="hljs-string">&quot;sk-......&quot;</span><br></code></pre></td></tr></table></figure>

<p>2 tool.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI<br><span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv, find_dotenv<br><br><span class="hljs-comment"># 读取本地/项目的环境变量</span><br><span class="hljs-comment"># find_dotenv()寻找并定位.env文件的路径</span><br><span class="hljs-comment"># load_dotenv()读取该.env文件，并将其中的环境变量加载到当前的运行环境中  </span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_openai_key</span>():<br>    <span class="hljs-comment"># 自动查找并加载当前目录/父目录下的.env文件</span><br>    _ = load_dotenv(find_dotenv())<br>    <span class="hljs-comment"># 返回环境变量中的OPENAI_API_KEY（若不存在会抛出KeyError，提示配置缺失）</span><br>    <span class="hljs-keyword">return</span> os.environ[<span class="hljs-string">&#x27;OPENAI_API_KEY&#x27;</span>]<br><br>client = OpenAI(<br>    <span class="hljs-comment"># This is the default and can be omitted</span><br>    api_key=get_openai_key(),  <br>)<br><br><span class="hljs-comment"># 单轮聊天</span><br><span class="hljs-comment"># 一个封装 OpenAI 接口的函数，参数为 Prompt，返回对应结果</span><br><span class="hljs-comment"># 适用于单轮对话。我们将 Prompt 放入某种类似用户消息的对话框中。</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_completion</span>(<span class="hljs-params">prompt, model=<span class="hljs-string">&quot;gpt-4o-mini&quot;</span></span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    prompt: 对应的提示词</span><br><span class="hljs-string">    model: 调用的模型</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    messages = [&#123;<span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>: prompt&#125;]<br>    response = client.chat.completions.create(<br>        model=model,<br>        messages=messages,<br>        temperature=<span class="hljs-number">0</span>, <span class="hljs-comment"># 模型输出的温度系数，控制输出的随机程度</span><br>        max_tokens=<span class="hljs-number">500</span><br>    )<br>    <span class="hljs-comment"># 调用 OpenAI 的 ChatCompletion 接口</span><br>    <span class="hljs-keyword">return</span> response.choices[<span class="hljs-number">0</span>].message.content.strip()<br><br><span class="hljs-comment">#多轮聊天</span><br><span class="hljs-comment"># 传入一个消息列表。这些消息可以来自大量不同的角色 (roles) ，我们会描述一下这些角色。</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_completion_from_messages</span>(<span class="hljs-params">messages, model=<span class="hljs-string">&quot;gpt-4o-mini&quot;</span>, temperature=<span class="hljs-number">0</span></span>):<br>    response = client.chat.completions.create(<br>        model=model,<br>        messages=messages,<br>        temperature=temperature, <span class="hljs-comment"># 控制模型输出的随机程度</span><br>    )<br><span class="hljs-comment">#     print(str(response.choices[0].message))</span><br>    <span class="hljs-keyword">return</span> response.choices[<span class="hljs-number">0</span>].message.content.strip()<br><br></code></pre></td></tr></table></figure>

<p>3 使用上面的原则编写prompt</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> doctest <span class="hljs-keyword">import</span> OutputChecker<br><span class="hljs-keyword">from</span> tool <span class="hljs-keyword">import</span> get_completion<br><br><span class="hljs-comment">## 原则一 编写清晰、具体的指令</span><br><span class="hljs-comment">### 1. 使用分隔符清晰地表示输入的不同部分</span><br>text = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">您应该提供尽可能清晰、具体的指示，以表达您希望模型执行的任务。\</span><br><span class="hljs-string">这将引导模型朝向所需的输出，并降低收到无关或不正确响应的可能性。\</span><br><span class="hljs-string">不要将写清晰的提示词与写简短的提示词混淆。\</span><br><span class="hljs-string">在许多情况下，更长的提示词可以为模型提供更多的清晰度和上下文信息，从而导致更详细和相关的输出。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># 需要总结的文本内容</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">把用三个反引号括起来的文本总结成一句话。</span><br><span class="hljs-string">```<span class="hljs-subst">&#123;text&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># 指令内容，使用 ``` 来分隔指令和待总结的内容</span><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><span class="hljs-comment"># output： 提供清晰、具体且详细的指示可以帮助模型更准确地执行任务并减少无关响应的可能性。</span><br><br><span class="hljs-comment">### 2.寻求结构化的输出</span><br>prompt1 = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">请生成包括书名、作者和类别的三本非虚构的、真实存在的中文金融书籍清单，\</span><br><span class="hljs-string">并以 JSON 格式提供，其中包含以下键:book_id、title、author、genre。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response1 = get_completion(prompt1)</span><br><span class="hljs-comment"># print(response1)</span><br><span class="hljs-comment"># output：</span><br><span class="hljs-comment"># 以下是三本非虚构的中文金融书籍的清单，以 JSON 格式提供：</span><br><br><span class="hljs-comment"># ```json</span><br><span class="hljs-comment"># [</span><br><span class="hljs-comment">#     &#123;</span><br><span class="hljs-comment">#         &quot;book_id&quot;: 1,</span><br><span class="hljs-comment">#         &quot;title&quot;: &quot;货币金融学&quot;,</span><br><span class="hljs-comment">#         &quot;author&quot;: &quot;弗雷德里克·S·米什金&quot;,</span><br><span class="hljs-comment">#         &quot;genre&quot;: &quot;金融&quot;</span><br><span class="hljs-comment">#     &#125;,</span><br><span class="hljs-comment">#     &#123;</span><br><span class="hljs-comment">#         &quot;book_id&quot;: 2,</span><br><span class="hljs-comment">#         &quot;title&quot;: &quot;金融市场与机构&quot;,</span><br><span class="hljs-comment">#         &quot;author&quot;: &quot;弗雷德里克·S·米什金, 斯坦利·G·埃利斯&quot;,</span><br><span class="hljs-comment">#         &quot;genre&quot;: &quot;金融&quot;</span><br><span class="hljs-comment">#     &#125;,</span><br><span class="hljs-comment">#     &#123;</span><br><span class="hljs-comment">#         &quot;book_id&quot;: 3,</span><br><span class="hljs-comment">#         &quot;title&quot;: &quot;投资学&quot;,</span><br><span class="hljs-comment">#         &quot;author&quot;: &quot;威廉·F·夏普, 亚历克斯·凯利, 约翰·C·博迪&quot;,</span><br><span class="hljs-comment">#         &quot;genre&quot;: &quot;金融&quot;</span><br><span class="hljs-comment">#     &#125;</span><br><span class="hljs-comment"># ]</span><br><span class="hljs-comment"># ``` </span><br><br><span class="hljs-comment"># 请注意，书籍的中文翻译可能会有所不同，以上书名为常见翻译。</span><br><br><span class="hljs-comment">### 3.要求模型检查是否满足条件</span><br><span class="hljs-comment"># 满足条件的输入（text中提供了步骤）</span><br>text_1 = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">泡一杯茶很容易。首先，需要把水烧开。\</span><br><span class="hljs-string">在等待期间，拿一个杯子并把茶包放进去。\</span><br><span class="hljs-string">一旦水足够热，就把它倒在茶包上。\</span><br><span class="hljs-string">等待一会儿，让茶叶浸泡。几分钟后，取出茶包。\</span><br><span class="hljs-string">如果您愿意，可以加一些糖或牛奶调味。\</span><br><span class="hljs-string">就这样，您可以享受一杯美味的茶了。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>prompt2 = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">您将获得由三个引号括起来的文本。\</span><br><span class="hljs-string">如果它包含一系列的指令，则需要按照以下格式重新编写这些指令：</span><br><span class="hljs-string"></span><br><span class="hljs-string">第一步 - ...</span><br><span class="hljs-string">第二步 - …</span><br><span class="hljs-string">…</span><br><span class="hljs-string">第N步 - …</span><br><span class="hljs-string"></span><br><span class="hljs-string">如果文本中不包含一系列的指令，则直接写“未提供步骤”。&quot;</span><br><span class="hljs-string">\&quot;\&quot;\&quot;<span class="hljs-subst">&#123;text_1&#125;</span>\&quot;\&quot;\&quot;</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response2 = get_completion(prompt2)</span><br><span class="hljs-comment"># print(&quot;Text 1 的总结:&quot;)</span><br><span class="hljs-comment"># print(response2)</span><br><br><span class="hljs-comment"># 不满足条件的输入（text中未提供预期指令）</span><br>text_2 = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">今天阳光明媚，鸟儿在歌唱。\</span><br><span class="hljs-string">这是一个去公园散步的美好日子。\</span><br><span class="hljs-string">鲜花盛开，树枝在微风中轻轻摇曳。\</span><br><span class="hljs-string">人们外出享受着这美好的天气，有些人在野餐，有些人在玩游戏或者在草地上放松。\</span><br><span class="hljs-string">这是一个完美的日子，可以在户外度过并欣赏大自然的美景。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>prompt3 = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">您将获得由三个引号括起来的文本。\</span><br><span class="hljs-string">如果它包含一系列的指令，则需要按照以下格式重新编写这些指令：</span><br><span class="hljs-string"></span><br><span class="hljs-string">第一步 - ...</span><br><span class="hljs-string">第二步 - …</span><br><span class="hljs-string">…</span><br><span class="hljs-string">第N步 - …</span><br><span class="hljs-string"></span><br><span class="hljs-string">如果文本中不包含一系列的指令，则直接写“未提供步骤”。&quot;</span><br><span class="hljs-string">\&quot;\&quot;\&quot;<span class="hljs-subst">&#123;text_2&#125;</span>\&quot;\&quot;\&quot;</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-comment"># response3 = get_completion(prompt3)</span><br><span class="hljs-comment"># print(&quot;Text 2 的总结:&quot;)</span><br><span class="hljs-comment"># print(response3)</span><br><span class="hljs-comment"># output：</span><br><span class="hljs-comment"># Text 1 的总结:</span><br><span class="hljs-comment"># 第一步 - 把水烧开。  </span><br><span class="hljs-comment"># 第二步 - 拿一个杯子并把茶包放进去。  </span><br><span class="hljs-comment"># 第三步 - 将热水倒在茶包上。  </span><br><span class="hljs-comment"># 第四步 - 等待一会儿，让茶叶浸泡。  </span><br><span class="hljs-comment"># 第五步 - 几分钟后，取出茶包。  </span><br><span class="hljs-comment"># 第六步 - 如果愿意，可以加一些糖或牛奶调味。  </span><br><span class="hljs-comment"># 第七步 - 享受一杯美味的茶。</span><br><span class="hljs-comment"># Text 2 的总结:</span><br><span class="hljs-comment"># 未提供步骤。</span><br><br><span class="hljs-comment">### 4.提供少量实例</span><br>prompt4 = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">您的任务是以一致的风格回答问题。</span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;孩子&gt;: 请教我何为耐心。</span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;祖父母&gt;: 挖出最深峡谷的河流源于一处不起眼的泉眼；最宏伟的交响乐从单一的音符开始；最复杂的挂毯以一根孤独的线开始编织。</span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;孩子&gt;: 请教我何为韧性。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response4 = get_completion(prompt4)</span><br><span class="hljs-comment"># print(response4)</span><br><span class="hljs-comment"># output：</span><br><span class="hljs-comment"># &lt;祖父母&gt;: 一棵树在风暴中弯曲，却不折断；一朵花在严寒中依然绽放；一条河流在岩石间蜿蜒，最终找到出路。韧性就是在逆境中坚持，\</span><br><span class="hljs-comment"># 勇敢面对挑战，始终不放弃。</span><br><br><br><span class="hljs-comment">## 原则二 给模型思考的时间</span><br><span class="hljs-comment">### 1.指定完成任务所需的步骤</span><br>text_3 = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">在一个迷人的村庄里，兄妹杰克和吉尔出发去一个山顶井里打水。\</span><br><span class="hljs-string">他们一边唱着欢乐的歌，一边往上爬，\</span><br><span class="hljs-string">然而不幸降临——杰克绊了一块石头，从山上滚了下来，吉尔紧随其后。\</span><br><span class="hljs-string">虽然略有些摔伤，但他们还是回到了温馨的家中。\</span><br><span class="hljs-string">尽管出了这样的意外，他们的冒险精神依然没有减弱，继续充满愉悦地探索。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># example 1</span><br>prompt_1 = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">执行以下操作：</span><br><span class="hljs-string">1-用一句话概括下面用三个反引号括起来的文本。</span><br><span class="hljs-string">2-将摘要翻译成英语。</span><br><span class="hljs-string">3-在英语摘要中列出每个人名。</span><br><span class="hljs-string">4-输出一个 JSON 对象，其中包含以下键：english_summary，num_names。</span><br><span class="hljs-string"></span><br><span class="hljs-string">请用换行符分隔您的答案。</span><br><span class="hljs-string"></span><br><span class="hljs-string">Text:</span><br><span class="hljs-string">```<span class="hljs-subst">&#123;text_3&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response_1 = get_completion(prompt_1)</span><br><span class="hljs-comment"># print(&quot;prompt 1:&quot;)</span><br><span class="hljs-comment"># print(response_1)</span><br><span class="hljs-comment"># output：</span><br><span class="hljs-comment"># prompt 1:</span><br><span class="hljs-comment"># 兄妹杰克和吉尔在爬山打水时不幸摔下山，但他们依然保持冒险精神，愉快地回家。  </span><br><span class="hljs-comment"># Jack and Jill, siblings, set off to fetch water from a hilltop well but unfortunately fell down the hill; however, they maintained their adventurous spirit and happily returned home.  </span><br><span class="hljs-comment"># Jack, Jill  </span><br><span class="hljs-comment"># &#123;&quot;english_summary&quot;:&quot;Jack and Jill, siblings, set off to fetch water from a hilltop well but unfortunately fell down the hill; however, they maintained their adventurous spirit and happily returned home.&quot;,&quot;num_names&quot;:2&#125;</span><br><br>prompt_2 = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">1-用一句话概括下面用&lt;&gt;括起来的文本。</span><br><span class="hljs-string">2-将摘要翻译成英语。</span><br><span class="hljs-string">3-在英语摘要中列出每个名称。</span><br><span class="hljs-string">4-输出一个 JSON 对象，其中包含以下键：English_summary，num_names。</span><br><span class="hljs-string"></span><br><span class="hljs-string">请使用以下格式：</span><br><span class="hljs-string">文本：&lt;要总结的文本&gt;</span><br><span class="hljs-string">摘要：&lt;摘要&gt;</span><br><span class="hljs-string">翻译：&lt;摘要的翻译&gt;</span><br><span class="hljs-string">名称：&lt;英语摘要中的名称列表&gt;</span><br><span class="hljs-string">输出 JSON：&lt;带有 English_summary 和 num_names 的 JSON&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">Text: &lt;<span class="hljs-subst">&#123;text_3&#125;</span>&gt;</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response = get_completion(prompt_2)</span><br><span class="hljs-comment"># print(&quot;\nprompt 2:&quot;)</span><br><span class="hljs-comment"># print(response)</span><br><span class="hljs-comment"># output：</span><br><span class="hljs-comment"># prompt 2:</span><br><span class="hljs-comment"># 文本：&lt;在一个迷人的村庄里，兄妹杰克和吉尔出发去一个山顶井里打水。他们一边唱着欢乐的歌，一边往上爬，然而不幸降临——杰克绊了一块石头，从山上滚了下来，吉尔紧随其后。虽然略有些摔伤，但他们还是回到了温馨的家中。尽管出了这样的意外，他们的冒险精神依然没有减弱，继续充满愉悦地探索。&gt;</span><br><span class="hljs-comment"># 摘要：兄妹杰克和吉尔在爬山打水时发生意外，但他们依然保持冒险精神，继续探索。</span><br><span class="hljs-comment"># 翻译：Siblings Jack and Jill had an accident while climbing to fetch water, but they maintained their adventurous spirit and continued to explore.</span><br><span class="hljs-comment"># 名称：[&quot;Jack&quot;, &quot;Jill&quot;]</span><br><span class="hljs-comment"># 输出 JSON：&#123;&quot;English_summary&quot;:&quot;Siblings Jack and Jill had an accident while climbing to fetch water, but they maintained their adventurous spirit and continued to explore.&quot;,&quot;num_names&quot;:2&#125;</span><br><br><span class="hljs-comment">### 2.指导模型在下结论之前找出一个自己的解法</span><br><span class="hljs-comment"># 我们可以在 Prompt 中先要求语言模型自己尝试解决这个问题，思考出自己的解法，然后再与提供的解答进行对比，判断正确性。</span><br><span class="hljs-comment"># 这种先让语言模型自主思考的方式，能帮助它更深入理解问题，做出更准确的判断。</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">判断学生的解决方案是否正确。</span><br><span class="hljs-string"></span><br><span class="hljs-string">问题:</span><br><span class="hljs-string">我正在建造一个太阳能发电站，需要帮助计算财务。</span><br><span class="hljs-string"></span><br><span class="hljs-string">    土地费用为 100美元/平方英尺</span><br><span class="hljs-string">    我可以以 250美元/平方英尺的价格购买太阳能电池板</span><br><span class="hljs-string">    我已经谈判好了维护合同，每年需要支付固定的10万美元，并额外支付每平方英尺10美元</span><br><span class="hljs-string">    作为平方英尺数的函数，首年运营的总费用是多少。</span><br><span class="hljs-string"></span><br><span class="hljs-string">学生的解决方案：</span><br><span class="hljs-string">设x为发电站的大小，单位为平方英尺。</span><br><span class="hljs-string">费用：</span><br><span class="hljs-string"></span><br><span class="hljs-string">    土地费用：100x</span><br><span class="hljs-string">    太阳能电池板费用：250x</span><br><span class="hljs-string">    维护费用：100,000美元+100x</span><br><span class="hljs-string">    总费用：100x+250x+100,000美元+100x=450x+100,000美元</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><span class="hljs-comment"># 此时大模型给出学生的答案是正确的，但是其实学生答案是错误的</span><br><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">请判断学生的解决方案是否正确，请通过如下步骤解决这个问题：</span><br><span class="hljs-string"></span><br><span class="hljs-string">步骤：</span><br><span class="hljs-string"></span><br><span class="hljs-string">    首先，自己解决问题。</span><br><span class="hljs-string">    然后将您的解决方案与学生的解决方案进行比较，对比计算得到的总费用与学生计算的总费用是否一致，并评估学生的解决方案是否正确。</span><br><span class="hljs-string">    在自己完成问题之前，请勿决定学生的解决方案是否正确。</span><br><span class="hljs-string"></span><br><span class="hljs-string">使用以下格式：</span><br><span class="hljs-string"></span><br><span class="hljs-string">    问题：问题文本</span><br><span class="hljs-string">    学生的解决方案：学生的解决方案文本</span><br><span class="hljs-string">    实际解决方案和步骤：实际解决方案和步骤文本</span><br><span class="hljs-string">    学生计算的总费用：学生计算得到的总费用</span><br><span class="hljs-string">    实际计算的总费用：实际计算出的总费用</span><br><span class="hljs-string">    学生计算的费用和实际计算的费用是否相同：是或否</span><br><span class="hljs-string">    学生的解决方案和实际解决方案是否相同：是或否</span><br><span class="hljs-string">    学生的成绩：正确或不正确</span><br><span class="hljs-string"></span><br><span class="hljs-string">问题：</span><br><span class="hljs-string"></span><br><span class="hljs-string">    我正在建造一个太阳能发电站，需要帮助计算财务。 </span><br><span class="hljs-string">    - 土地费用为每平方英尺100美元</span><br><span class="hljs-string">    - 我可以以每平方英尺250美元的价格购买太阳能电池板</span><br><span class="hljs-string">    - 我已经谈判好了维护合同，每年需要支付固定的10万美元，并额外支付每平方英尺10美元;</span><br><span class="hljs-string"></span><br><span class="hljs-string">    作为平方英尺数的函数，首年运营的总费用是多少。</span><br><span class="hljs-string"></span><br><span class="hljs-string">学生的解决方案：</span><br><span class="hljs-string"></span><br><span class="hljs-string">    设x为发电站的大小，单位为平方英尺。</span><br><span class="hljs-string">    费用：</span><br><span class="hljs-string">    1. 土地费用：100x美元</span><br><span class="hljs-string">    2. 太阳能电池板费用：250x美元</span><br><span class="hljs-string">    3. 维护费用：100,000+100x=10万美元+10x美元</span><br><span class="hljs-string">    总费用：100x美元+250x美元+10万美元+100x美元=450x+10万美元</span><br><span class="hljs-string"></span><br><span class="hljs-string">实际解决方案和步骤：</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>response = get_completion(prompt)<br><span class="hljs-built_in">print</span>(response)<br><br></code></pre></td></tr></table></figure>

<h2 id="03-迭代优化"><a href="#03-迭代优化" class="headerlink" title="03.迭代优化"></a>03.迭代优化</h2><p>​	在开发大语言模型应用时，很难通过第一次尝试就得到完美适用的 Prompt。但关键是要有一个<strong>良好的迭代优化过程</strong>，以不断改进 Prompt。</p>
<p>​	模仿模型开发流程：有了想法后，编写代码、获取数据、训练模型、查看结果。通过分析错误找出适用领域，调整方案后再次训练。</p>
<p>​	迭代优化prompt流程：有了任务想法后，可以先编写初版 Prompt，注意清晰明确并给模型充足思考时间。运行后检查结果，如果不理想，则分析 Prompt 不够清楚或思考时间不够等原因，做出改进，再次运行。如此循环多次，终将找到适合应用的 Prompt。</p>
<img src="/.io//image-20251223220338923.png" srcset="/img/loading.gif" lazyload alt="image-20251223220338923" style="zoom:50%;">

<h3 id="一、从产品说明书生成营销产品描述"><a href="#一、从产品说明书生成营销产品描述" class="headerlink" title="一、从产品说明书生成营销产品描述"></a>一、从产品说明书生成营销产品描述</h3><p>​	给定一份椅子的资料页。描述说它属于中世纪灵感系列，产自意大利，并介绍了材料、构造、尺寸、可选配件等参数。假设您想要使用这份说明书帮助营销团队为电商平台撰写营销描述稿：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 示例：产品说明书</span><br><span class="hljs-keyword">from</span> tool <span class="hljs-keyword">import</span> get_completion<br><br><br>fact_sheet_chair = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">概述</span><br><span class="hljs-string"></span><br><span class="hljs-string">    美丽的中世纪风格办公家具系列的一部分，包括文件柜、办公桌、书柜、会议桌等。</span><br><span class="hljs-string">    多种外壳颜色和底座涂层可选。</span><br><span class="hljs-string">    可选塑料前后靠背装饰（SWC-100）或10种面料和6种皮革的全面装饰（SWC-110）。</span><br><span class="hljs-string">    底座涂层选项为：不锈钢、哑光黑色、光泽白色或铬。</span><br><span class="hljs-string">    椅子可带或不带扶手。</span><br><span class="hljs-string">    适用于家庭或商业场所。</span><br><span class="hljs-string">    符合合同使用资格。</span><br><span class="hljs-string"></span><br><span class="hljs-string">结构</span><br><span class="hljs-string"></span><br><span class="hljs-string">    五个轮子的塑料涂层铝底座。</span><br><span class="hljs-string">    气动椅子调节，方便升降。</span><br><span class="hljs-string"></span><br><span class="hljs-string">尺寸</span><br><span class="hljs-string"></span><br><span class="hljs-string">    宽度53厘米|20.87英寸</span><br><span class="hljs-string">    深度51厘米|20.08英寸</span><br><span class="hljs-string">    高度80厘米|31.50英寸</span><br><span class="hljs-string">    座椅高度44厘米|17.32英寸</span><br><span class="hljs-string">    座椅深度41厘米|16.14英寸</span><br><span class="hljs-string"></span><br><span class="hljs-string">选项</span><br><span class="hljs-string"></span><br><span class="hljs-string">    软地板或硬地板滚轮选项。</span><br><span class="hljs-string">    两种座椅泡沫密度可选：中等（1.8磅/立方英尺）或高（2.8磅/立方英尺）。</span><br><span class="hljs-string">    无扶手或8个位置PU扶手。</span><br><span class="hljs-string"></span><br><span class="hljs-string">材料</span><br><span class="hljs-string">外壳底座滑动件</span><br><span class="hljs-string"></span><br><span class="hljs-string">    改性尼龙PA6/PA66涂层的铸铝。</span><br><span class="hljs-string">    外壳厚度：10毫米。</span><br><span class="hljs-string">    座椅</span><br><span class="hljs-string">    HD36泡沫</span><br><span class="hljs-string"></span><br><span class="hljs-string">原产国</span><br><span class="hljs-string"></span><br><span class="hljs-string">    意大利</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># 1.初始提示</span><br><span class="hljs-comment"># Prompt ：基于说明书创建营销描述</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">您的任务是帮助营销团队基于技术说明书创建一个产品的营销描述。</span><br><span class="hljs-string"></span><br><span class="hljs-string">根据```标记的技术说明书中提供的信息，编写一个产品描述。</span><br><span class="hljs-string"></span><br><span class="hljs-string">技术说明: ```<span class="hljs-subst">&#123;fact_sheet_chair&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><br><span class="hljs-comment"># **产品描述：中世纪风格办公家具系列**</span><br><br><span class="hljs-comment"># 探索我们精美的中世纪风格办公家具系列，完美融合了经典设计与现代功能。无论是在家庭办公室还是商业环境中，这款系列都能为您的工作空间增添一份优雅与舒适。</span><br><br><span class="hljs-comment"># **多样化选择**  </span><br><span class="hljs-comment"># 我们提供多种外壳颜色和底座涂层选项，您可以根据个人喜好和空间风格进行定制。选择塑料前后靠背装饰（SWC-100）或从10种面料和6种皮革中挑选全面装饰（SWC-110），让每一件家具都独一无二。</span><br><br><span class="hljs-comment"># **卓越结构**  </span><br><span class="hljs-comment"># 每款椅子均配备五个轮子的塑料涂层铝底座，确保灵活移动与稳定性。气动调节功能使得椅子的升降变得轻松自如，适应不同用户的需求。</span><br><br><span class="hljs-comment"># **完美尺寸**  </span><br><span class="hljs-comment"># 椅子的设计考虑到了人体工程学，宽度53厘米（20.87英寸）、深度51厘米（20.08英寸）和高度80厘米（31.50英寸），座椅高度为44厘米（17.32英寸），座椅深度为41厘米（16.14英寸），为您提供最佳的坐姿体验。</span><br><br><span class="hljs-comment"># **个性化选项**  </span><br><span class="hljs-comment"># 我们提供软地板或硬地板滚轮选项，确保在不同地面上都能顺畅移动。此外，您可以选择中等（1.8磅/立方英尺）或高（2.8磅/立方英尺）两种座椅泡沫密度，满足不同的舒适需求。椅子可选配无扶手或8个位置PU扶手，进一步提升使用体验。</span><br><br><span class="hljs-comment"># **优质材料**  </span><br><span class="hljs-comment"># 我们的办公家具采用改性尼龙PA6/PA66涂层的铸铝外壳，厚度达到10毫米，确保耐用性与美观性。座椅则使用HD36泡沫，提供卓越的舒适感。</span><br><br><span class="hljs-comment"># **意大利制造**  </span><br><span class="hljs-comment"># 每一件产品均在意大利精心制造，体现了意大利工艺的卓越与细致</span><br><br><br><span class="hljs-comment">#2.提示优化：解决生成文本太长</span><br><span class="hljs-comment"># 优化后的 Prompt，要求生成描述不多于 50 词</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">您的任务是帮助营销团队基于技术说明书创建一个产品的零售网站描述。</span><br><span class="hljs-string"></span><br><span class="hljs-string">根据```标记的技术说明书中提供的信息，编写一个产品描述。</span><br><span class="hljs-string"></span><br><span class="hljs-string">使用最多50个词。</span><br><span class="hljs-string"></span><br><span class="hljs-string">技术规格：```<span class="hljs-subst">&#123;fact_sheet_chair&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><span class="hljs-comment"># # 由于中文需要分词，此处直接计算整体长度</span><br><span class="hljs-comment"># print(len(response))</span><br><span class="hljs-comment"># 探索我们中世纪风格的办公家具系列，完美结合美观与功能。多种颜色和材料选项，适合家庭或商业环境。气动调节和五轮底座设计，提供卓越舒适与灵活性。意大利制造，品质保证。</span><br><span class="hljs-comment"># 81</span><br><br><br><span class="hljs-comment">#3.提示优化：处理抓错文本细节</span><br><span class="hljs-comment"># 在这个案例中，进一步分析会发现,该椅子面向的其实是家具零售商，而不是终端消费者。</span><br><span class="hljs-comment"># 所以生成的文案中过多强调风格、氛围等方面，而较少涉及产品技术细节，与目标受众的关注点不太吻合。</span><br><span class="hljs-comment"># 这时候我们就可以继续调整 Prompt，明确要求语言模型生成面向家具零售商的描述，更多关注材质、工艺、结构等技术方面的表述。</span><br><span class="hljs-comment"># 优化后的 Prompt，说明面向对象，应具有什么性质且侧重于什么方面</span><br><br><span class="hljs-comment"># 根据不同目标受众关注不同的方面，输出风格和内容上都适合的文本。</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">您的任务是帮助营销团队基于技术说明书创建一个产品的零售网站描述。</span><br><span class="hljs-string"></span><br><span class="hljs-string">根据```标记的技术说明书中提供的信息，编写一个产品描述。</span><br><span class="hljs-string"></span><br><span class="hljs-string">该描述面向家具零售商，因此应具有技术性质，并侧重于产品的材料构造。</span><br><span class="hljs-string"></span><br><span class="hljs-string">使用最多50个单词。</span><br><span class="hljs-string"></span><br><span class="hljs-string">技术规格： ```<span class="hljs-subst">&#123;fact_sheet_chair&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><span class="hljs-comment"># 这款中世纪风格办公椅采用改性尼龙涂层铸铝底座，厚度10毫米，确保耐用性与稳定性。</span><br><span class="hljs-comment"># 配备五个轮子的塑料涂层铝底座，提供气动调节功能，适合家庭与商业环境。多种材料与颜色选项可供选择。</span><br><br><span class="hljs-comment">#4.提示优化：添加表格描述</span><br><span class="hljs-comment"># 要求提取产品尺寸信息并组织成表格，并指定表格的列、表名和格式；再将所有内容格式化为可以在网页使用的 HTML。</span><br><span class="hljs-comment"># 要求它抽取信息并组织成表格，并指定表格的列、表名和格式</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">您的任务是帮助营销团队基于技术说明书创建一个产品的零售网站描述。</span><br><span class="hljs-string"></span><br><span class="hljs-string">根据```标记的技术说明书中提供的信息，编写一个产品描述。</span><br><span class="hljs-string"></span><br><span class="hljs-string">该描述面向家具零售商，因此应具有技术性质，并侧重于产品的材料构造。</span><br><span class="hljs-string"></span><br><span class="hljs-string">在描述末尾，包括技术规格中每个7个字符的产品ID。</span><br><span class="hljs-string"></span><br><span class="hljs-string">在描述之后，包括一个表格，提供产品的尺寸。表格应该有两列。第一列包括尺寸的名称。第二列只包括英寸的测量值。</span><br><span class="hljs-string"></span><br><span class="hljs-string">给表格命名为“产品尺寸”。</span><br><span class="hljs-string"></span><br><span class="hljs-string">将所有内容格式化为可用于网站的HTML格式。将描述放在&lt;div&gt;元素中。</span><br><span class="hljs-string"></span><br><span class="hljs-string">技术规格：```<span class="hljs-subst">&#123;fact_sheet_chair&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br>response = get_completion(prompt)<br><span class="hljs-built_in">print</span>(response)<br><br><span class="hljs-comment"># 表格是以 HTML 格式呈现的，加载出来</span><br><span class="hljs-keyword">from</span> IPython.display <span class="hljs-keyword">import</span> display, HTML<br><br>display(HTML(response))<br><br></code></pre></td></tr></table></figure>



<h2 id="04-文本概括"><a href="#04-文本概括" class="headerlink" title="04.文本概括"></a>04.文本概括</h2><p>​	大型语言模型（LLM）的文本摘要功能：<strong>节省时间</strong>，<strong>提高效率</strong>，以及<strong>精准获取信息</strong>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 1.单一文本概括</span><br><span class="hljs-comment"># 概括这些海量、冗长的评论，便能够快速地浏览更多评论，洞悉客户的偏好，从而指导平台与商家提供更优质的服务。</span><br><span class="hljs-keyword">from</span> tool <span class="hljs-keyword">import</span> get_completion<br><br>prod_review = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">这个熊猫公仔是我给女儿的生日礼物，她很喜欢，去哪都带着。</span><br><span class="hljs-string">公仔很软，超级可爱，面部表情也很和善。但是相比于价钱来说，</span><br><span class="hljs-string">它有点小，我感觉在别的地方用同样的价钱能买到更大的。</span><br><span class="hljs-string">快递比预期提前了一天到货，所以在送给女儿之前，我自己玩了会。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">您的任务是从电子商务网站上生成一个产品评论的简短摘要。</span><br><span class="hljs-string"></span><br><span class="hljs-string">请对三个反引号之间的评论文本进行概括，最多30个字。</span><br><span class="hljs-string"></span><br><span class="hljs-string">评论: ```<span class="hljs-subst">&#123;prod_review&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><span class="hljs-comment"># 公仔可爱柔软，女儿喜欢，但价格偏高、尺寸较小。</span><br><br><span class="hljs-comment"># 2.设置关键角度侧重</span><br><span class="hljs-comment"># 针对不同的业务场景对文本的侧重会有所不同</span><br><span class="hljs-comment"># 2.1侧重于快递服务</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">您的任务是从电子商务网站上生成一个产品评论的简短摘要。</span><br><span class="hljs-string"></span><br><span class="hljs-string">请对三个反引号之间的评论文本进行概括，最多30个字，并且侧重在快递服务上。</span><br><span class="hljs-string"></span><br><span class="hljs-string">评论: ```<span class="hljs-subst">&#123;prod_review&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><br><span class="hljs-comment"># 2.2侧重于产品价格和质量</span><br>prompt1 = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">您的任务是从电子商务网站上生成一个产品评论的简短摘要。</span><br><span class="hljs-string"></span><br><span class="hljs-string">请对三个反引号之间的评论文本进行概括，最多30个词汇，并且侧重在产品价格和质量上。</span><br><span class="hljs-string"></span><br><span class="hljs-string">评论: ```<span class="hljs-subst">&#123;prod_review&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-comment"># response1 = get_completion(prompt1)</span><br><span class="hljs-comment"># print(response1)</span><br><span class="hljs-comment"># 快递服务超出预期，提前一天送达，令人满意。</span><br><span class="hljs-comment"># 公仔可爱且柔软，但价格偏高，感觉可以用同样的钱买到更大的产品。</span><br><br><span class="hljs-comment"># 3.关键信息提取</span><br><span class="hljs-comment"># 可以要求 LLM 进行 文本提取（Extract） 而非概括( Summarize )。</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">您的任务是从电子商务网站上的产品评论中提取相关信息。</span><br><span class="hljs-string"></span><br><span class="hljs-string">请从以下三个反引号之间的评论文本中提取产品运输相关的信息，最多30个词汇。</span><br><span class="hljs-string"></span><br><span class="hljs-string">评论: ```<span class="hljs-subst">&#123;prod_review&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><span class="hljs-comment"># 快递比预期提前了一天到货。</span><br><br><span class="hljs-comment"># 二、同时概括多条文本</span><br><span class="hljs-comment"># 在实际的工作流中，我们往往要处理大量的评论文本，下面的示例将多条用户评价集合在一个列表中，并利用 for 循环和文本概括（Summarize）提示词，</span><br><span class="hljs-comment"># 将评价概括至小于 20 个词以下，并按顺序打印。当然，在实际生产中，对于不同规模的评论文本，除了使用 for 循环以外，还可能需要考虑整合评论、</span><br><span class="hljs-comment"># 分布式等方法提升运算效率。</span><br>review_1 = prod_review<br><br><span class="hljs-comment"># 一盏落地灯的评论</span><br>review_2 = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">我需要一盏漂亮的卧室灯，这款灯不仅具备额外的储物功能，价格也并不算太高。</span><br><span class="hljs-string">收货速度非常快，仅用了两天的时间就送到了。</span><br><span class="hljs-string">不过，在运输过程中，灯的拉线出了问题，幸好，公司很乐意寄送了一根全新的灯线。</span><br><span class="hljs-string">新的灯线也很快就送到手了，只用了几天的时间。</span><br><span class="hljs-string">装配非常容易。然而，之后我发现有一个零件丢失了，于是我联系了客服，他们迅速地给我寄来了缺失的零件！</span><br><span class="hljs-string">对我来说，这是一家非常关心客户和产品的优秀公司。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-comment"># 一把电动牙刷的评论</span><br>review_3 = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">我的牙科卫生员推荐了电动牙刷，所以我就买了这款。</span><br><span class="hljs-string">到目前为止，电池续航表现相当不错。</span><br><span class="hljs-string">初次充电后，我在第一周一直将充电器插着，为的是对电池进行条件养护。</span><br><span class="hljs-string">过去的3周里，我每天早晚都使用它刷牙，但电池依然维持着原来的充电状态。</span><br><span class="hljs-string">不过，牙刷头太小了。我见过比这个牙刷头还大的婴儿牙刷。</span><br><span class="hljs-string">我希望牙刷头更大一些，带有不同长度的刷毛，</span><br><span class="hljs-string">这样可以更好地清洁牙齿间的空隙，但这款牙刷做不到。</span><br><span class="hljs-string">总的来说，如果你能以50美元左右的价格购买到这款牙刷，那是一个不错的交易。</span><br><span class="hljs-string">制造商的替换刷头相当昂贵，但你可以购买价格更为合理的通用刷头。</span><br><span class="hljs-string">这款牙刷让我感觉就像每天都去了一次牙医，我的牙齿感觉非常干净！</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-comment"># 一台搅拌机的评论</span><br>review_4 = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">在11月份期间，这个17件套装还在季节性促销中，售价约为49美元，打了五折左右。</span><br><span class="hljs-string">可是由于某种原因（我们可以称之为价格上涨），到了12月的第二周，所有的价格都上涨了，</span><br><span class="hljs-string">同样的套装价格涨到了70-89美元不等。而11件套装的价格也从之前的29美元上涨了约10美元。</span><br><span class="hljs-string">看起来还算不错，但是如果你仔细看底座，刀片锁定的部分看起来没有前几年版本的那么漂亮。</span><br><span class="hljs-string">然而，我打算非常小心地使用它</span><br><span class="hljs-string">（例如，我会先在搅拌机中研磨豆类、冰块、大米等坚硬的食物，然后再将它们研磨成所需的粒度，</span><br><span class="hljs-string">接着切换到打蛋器刀片以获得更细的面粉，如果我需要制作更细腻/少果肉的食物）。</span><br><span class="hljs-string">在制作冰沙时，我会将要使用的水果和蔬菜切成细小块并冷冻</span><br><span class="hljs-string">（如果使用菠菜，我会先轻微煮熟菠菜，然后冷冻，直到使用时准备食用。</span><br><span class="hljs-string">如果要制作冰糕，我会使用一个小到中号的食物加工器），这样你就可以避免添加过多的冰块。</span><br><span class="hljs-string">大约一年后，电机开始发出奇怪的声音。我打电话给客户服务，但保修期已经过期了，</span><br><span class="hljs-string">所以我只好购买了另一台。值得注意的是，这类产品的整体质量在过去几年里有所下降</span><br><span class="hljs-string">，所以他们在一定程度上依靠品牌认知和消费者忠诚来维持销售。在大约两天内，我收到了新的搅拌机。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br>reviews = [review_1, review_2, review_3, review_4]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(reviews)):<br>    prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">    你的任务是从电子商务网站上的产品评论中提取相关信息。</span><br><span class="hljs-string"></span><br><span class="hljs-string">    请对三个反引号之间的评论文本进行概括，最多20个词汇。</span><br><span class="hljs-string"></span><br><span class="hljs-string">    评论文本: ```<span class="hljs-subst">&#123;reviews[i]&#125;</span>```</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br><br>    response = get_completion(prompt)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;评论<span class="hljs-subst">&#123;i+<span class="hljs-number">1</span>&#125;</span>: &quot;</span>, response, <span class="hljs-string">&quot;\n&quot;</span>)<br><span class="hljs-comment"># 评论1:  熊猫公仔可爱、柔软，女儿喜欢，但价格偏高、尺寸较小。快递提前到达。 </span><br><br><span class="hljs-comment"># 评论2:  漂亮的卧室灯，快速发货，良好客服，解决问题迅速，值得信赖。 </span><br><br><span class="hljs-comment"># 评论3:  电动牙刷续航良好，但牙刷头太小，替换刷头价格昂贵。总体性价比不错。 </span><br><br><span class="hljs-comment"># 评论4:  评论提到价格上涨、产品质量下降，使用技巧和售后服务问题。 </span><br></code></pre></td></tr></table></figure>

<h2 id="05-推断"><a href="#05-推断" class="headerlink" title="05.推断"></a>05.推断</h2><p>​	我们如何从产品评价和新闻文章中推到出情感和主题？</p>
<p>​	假如我是一名初创公司的数据分析师，我的任务是从各种产品评论和新闻文章中提取出关键的情感和主题。这些任务包括了标签提取、实体提取、以及理解文本的情感等等。在传统的机器学习流程中，我需要收集标签化的数据集、训练模型、确定如何在云端部署模型并进行推断。但耗费大量的时间和精力。</p>
<p>​	LLM 的一个明显优点是，对于许多这样的任务，你只需要编写一个 Prompt，就可以开始生成结果，大大减轻了你的工作负担。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 一、情感推断</span><br><span class="hljs-comment"># 1.情感倾向分析 情感二分类问题（正面/负面）</span><br><span class="hljs-keyword">from</span> tool <span class="hljs-keyword">import</span> get_completion<br><br>lamp_review = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">我需要一盏漂亮的卧室灯，这款灯具有额外的储物功能，价格也不算太高。\</span><br><span class="hljs-string">我很快就收到了它。在运输过程中，我们的灯绳断了，但是公司很乐意寄送了一个新的。\</span><br><span class="hljs-string">几天后就收到了。这款灯很容易组装。我发现少了一个零件，于是联系了他们的客服，他们很快就给我寄来了缺失的零件！\</span><br><span class="hljs-string">在我看来，Lumina 是一家非常关心顾客和产品的优秀公司！</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># 使得输出形式更统一</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">以下用三个反引号分隔的产品评论的情感是什么？</span><br><span class="hljs-string"></span><br><span class="hljs-string">用一个单词回答：「正面」或「负面」。</span><br><span class="hljs-string"></span><br><span class="hljs-string">评论文本: ```<span class="hljs-subst">&#123;lamp_review&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>response = get_completion(prompt)<br><span class="hljs-built_in">print</span>(response)<br><br><span class="hljs-comment"># 2.识别情感类型</span><br><span class="hljs-comment"># 中文</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">识别以下评论的作者表达的情感。包含不超过五个项目。将答案格式化为以逗号分隔的单词列表。</span><br><span class="hljs-string"></span><br><span class="hljs-string">评论文本: ```<span class="hljs-subst">&#123;lamp_review&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>response = get_completion(prompt)<br><span class="hljs-built_in">print</span>(response)<br><br><span class="hljs-comment"># 3.识别愤怒</span><br><span class="hljs-comment"># 中文</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">以下评论的作者是否表达了愤怒？评论用三个反引号分隔。给出是或否的答案。</span><br><span class="hljs-string"></span><br><span class="hljs-string">评论文本: ```<span class="hljs-subst">&#123;lamp_review&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>response = get_completion(prompt)<br><span class="hljs-built_in">print</span>(response)<br><br><span class="hljs-comment"># 二、信息提取</span><br><span class="hljs-comment"># 1.商品信息提取</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">从评论文本中识别以下项目：</span><br><span class="hljs-string">- 评论者购买的物品</span><br><span class="hljs-string">- 制造该物品的公司</span><br><span class="hljs-string"></span><br><span class="hljs-string">评论文本用三个反引号分隔。将你的响应格式化为以 “物品” 和 “品牌” 为键的 JSON 对象。</span><br><span class="hljs-string">如果信息不存在，请使用 “未知” 作为值。</span><br><span class="hljs-string">让你的回应尽可能简短。</span><br><span class="hljs-string"></span><br><span class="hljs-string">评论文本: ```<span class="hljs-subst">&#123;lamp_review&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>response = get_completion(prompt)<br><span class="hljs-built_in">print</span>(response)<br><br><span class="hljs-comment"># 2.综合情感推断和信息提取   综合上面，用一个prompt来得到信息</span><br><span class="hljs-comment"># 中文</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">从评论文本中识别以下项目：</span><br><span class="hljs-string">- 情绪（正面或负面）</span><br><span class="hljs-string">- 审稿人是否表达了愤怒？（是或否）</span><br><span class="hljs-string">- 评论者购买的物品</span><br><span class="hljs-string">- 制造该物品的公司</span><br><span class="hljs-string"></span><br><span class="hljs-string">评论用三个反引号分隔。将你的响应格式化为 JSON 对象，以 “情感倾向”、“是否生气”、“物品类型” 和 “品牌” 作为键。</span><br><span class="hljs-string">如果信息不存在，请使用 “未知” 作为值。</span><br><span class="hljs-string">让你的回应尽可能简短。</span><br><span class="hljs-string">将 “是否生气” 值格式化为布尔值。</span><br><span class="hljs-string"></span><br><span class="hljs-string">评论文本: ```<span class="hljs-subst">&#123;lamp_review&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>response = get_completion(prompt)<br><span class="hljs-built_in">print</span>(response)<br><br><span class="hljs-comment"># 三、主题推断</span><br><span class="hljs-comment"># 如何来推断这段文本的主旨是什么？</span><br><span class="hljs-comment"># 中文</span><br>story = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">在政府最近进行的一项调查中，要求公共部门的员工对他们所在部门的满意度进行评分。</span><br><span class="hljs-string">调查结果显示，NASA 是最受欢迎的部门，满意度为 95％。</span><br><span class="hljs-string"></span><br><span class="hljs-string">一位 NASA 员工 John Smith 对这一发现发表了评论，他表示：</span><br><span class="hljs-string">“我对 NASA 排名第一并不感到惊讶。这是一个与了不起的人们和令人难以置信的机会共事的好地方。我为成为这样一个创新组织的一员感到自豪。”</span><br><span class="hljs-string"></span><br><span class="hljs-string">NASA 的管理团队也对这一结果表示欢迎，主管 Tom Johnson 表示：</span><br><span class="hljs-string">“我们很高兴听到我们的员工对 NASA 的工作感到满意。</span><br><span class="hljs-string">我们拥有一支才华横溢、忠诚敬业的团队，他们为实现我们的目标不懈努力，看到他们的辛勤工作得到回报是太棒了。”</span><br><span class="hljs-string"></span><br><span class="hljs-string">调查还显示，社会保障管理局的满意度最低，只有 45％的员工表示他们对工作满意。</span><br><span class="hljs-string">政府承诺解决调查中员工提出的问题，并努力提高所有部门的工作满意度。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-comment"># 1.推断讨论主题</span><br><span class="hljs-comment"># 中文</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">确定以下给定文本中讨论的五个主题。</span><br><span class="hljs-string"></span><br><span class="hljs-string">每个主题用1-2个词概括。</span><br><span class="hljs-string"></span><br><span class="hljs-string">请输出一个可解析的Python列表，每个元素是一个字符串，展示了一个主题。</span><br><span class="hljs-string"></span><br><span class="hljs-string">给定文本: ```<span class="hljs-subst">&#123;story&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>response = get_completion(prompt)<br><span class="hljs-built_in">print</span>(response)<br><br><span class="hljs-comment"># 2.为特定主题制作新闻提醒</span><br><span class="hljs-comment"># 一个新闻网站或类似的平台，这是我们感兴趣的主题：美国航空航天局、当地政府、工程、员工满意度、联邦政府等。我们想要分析一篇新闻文章，理解其包含了哪些主题。</span><br><span class="hljs-comment"># 可以使用这样的 Prompt：确定以下主题列表中的每个项目是否是以下文本中的主题。以 0 或 1 的形式给出答案列表。</span><br><span class="hljs-comment"># 中文</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">判断主题列表中的每一项是否是给定文本中的一个话题，</span><br><span class="hljs-string"></span><br><span class="hljs-string">以列表的形式给出答案，每个元素是一个Json对象，键为对应主题，值为对应的 0 或 1。</span><br><span class="hljs-string"></span><br><span class="hljs-string">主题列表：美国航空航天局、当地政府、工程、员工满意度、联邦政府</span><br><span class="hljs-string"></span><br><span class="hljs-string">给定文本: ```<span class="hljs-subst">&#123;story&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>response = get_completion(prompt)<br><span class="hljs-built_in">print</span>(response)<br><span class="hljs-comment"># output：</span><br><span class="hljs-comment"># [</span><br><span class="hljs-comment">#   &#123;&quot;美国航空航天局&quot;: 1&#125;,</span><br><span class="hljs-comment">#   &#123;&quot;当地政府&quot;: 1&#125;,</span><br><span class="hljs-comment">#   &#123;&quot;工程&quot;: 0&#125;,</span><br><span class="hljs-comment">#   &#123;&quot;员工满意度&quot;: 1&#125;,</span><br><span class="hljs-comment">#   &#123;&quot;联邦政府&quot;: 1&#125;</span><br><span class="hljs-comment"># ]</span><br><span class="hljs-comment"># 从输出结果来看，这个 story 与关于“美国航空航天局”、“员工满意度”、“联邦政府”、“当地政府”有关，而与“工程”无关。这种能力在机器学习领域被称为</span><br><span class="hljs-comment"># 零样本（Zero-Shot）学习。这是因为我们并没有提供任何带标签的训练数据，仅凭 Prompt ，它便能判定哪些主题在新闻文章中被包含。</span><br><br><span class="hljs-comment"># 制定一个新闻提醒，我们同样可以运用这种处理新闻的流程。假设我对“美国航空航天局”的工作深感兴趣，</span><br><span class="hljs-comment"># 那么你就可以构建一个如此的系统：每当出现与&#x27;美国宇航局&#x27;相关的新闻，系统就会输出提醒。</span><br>result_lst = <span class="hljs-built_in">eval</span>(response)<br>topic_dict = &#123;<span class="hljs-built_in">list</span>(i.keys())[<span class="hljs-number">0</span>] : <span class="hljs-built_in">list</span>(i.values())[<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> result_lst&#125;<br><span class="hljs-built_in">print</span>(topic_dict)<br><span class="hljs-keyword">if</span> topic_dict[<span class="hljs-string">&#x27;美国航空航天局&#x27;</span>] == <span class="hljs-number">1</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;提醒: 关于美国航空航天局的新消息&quot;</span>)<br><br></code></pre></td></tr></table></figure>

<h2 id="06-文本转换"><a href="#06-文本转换" class="headerlink" title="06.文本转换"></a>06.文本转换</h2><p>​	掌握调用大语言模型接口进行文本转换的技能，是开发各种语言类应用的重要一步。大语言模型具有强大的文本转换能力，可以实现多语言翻译、拼写纠正、语法调整、格式转换等不同类型的文本转换任务。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 一、文本翻译</span><br><span class="hljs-comment"># 1.翻译为西班牙语</span><br><span class="hljs-keyword">from</span> tool <span class="hljs-keyword">import</span> get_completion<br><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">将以下中文翻译成西班牙语: \ </span><br><span class="hljs-string">```您好，我想订购一个搅拌机。```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><br><span class="hljs-comment"># 2.识别语种</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">请告诉我以下文本是什么语种: </span><br><span class="hljs-string">```Combien coûte le lampadaire?```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><br><br><span class="hljs-comment"># 3.多语种翻译</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">请将以下文本分别翻译成中文、英文、法语和西班牙语: </span><br><span class="hljs-string">```I want to order a basketball.```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><br><br><span class="hljs-comment"># 4.同时进行语气转换</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">请将以下文本翻译成中文，分别展示成正式与非正式两种语气: </span><br><span class="hljs-string">```Would you like to order a pillow?```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><br><br><span class="hljs-comment"># 5.通用翻译器</span><br><span class="hljs-comment"># 识别语种并进行多语种翻译的工具</span><br>user_messages = [<br>  <span class="hljs-string">&quot;La performance du système est plus lente que d&#x27;habitude.&quot;</span>,  <span class="hljs-comment"># System performance is slower than normal         </span><br>  <span class="hljs-string">&quot;Mi monitor tiene píxeles que no se iluminan.&quot;</span>,              <span class="hljs-comment"># My monitor has pixels that are not lighting</span><br>  <span class="hljs-string">&quot;Il mio mouse non funziona&quot;</span>,                                 <span class="hljs-comment"># My mouse is not working</span><br>  <span class="hljs-string">&quot;Mój klawisz Ctrl jest zepsuty&quot;</span>,                             <span class="hljs-comment"># My keyboard has a broken control key</span><br>  <span class="hljs-string">&quot;我的屏幕在闪烁&quot;</span>                                             <span class="hljs-comment"># My screen is flashing</span><br>]<br><br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">for</span> issue <span class="hljs-keyword">in</span> user_messages:<br>    time.sleep(<span class="hljs-number">20</span>)<br>    prompt = <span class="hljs-string">f&quot;告诉我以下文本是什么语种，直接输出语种，如法语，无需输出标点符号: ```<span class="hljs-subst">&#123;issue&#125;</span>```&quot;</span><br>    <span class="hljs-comment"># lang = get_completion(prompt)</span><br>    <span class="hljs-comment"># print(f&quot;原始消息 (&#123;lang&#125;): &#123;issue&#125;\n&quot;)</span><br><br>    prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">    将以下消息分别翻译成英文和中文，并写成</span><br><span class="hljs-string">    中文翻译：xxx</span><br><span class="hljs-string">    英文翻译：yyy</span><br><span class="hljs-string">    的格式：</span><br><span class="hljs-string">    ```<span class="hljs-subst">&#123;issue&#125;</span>```</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># response = get_completion(prompt)</span><br>    <span class="hljs-comment"># print(response, &quot;\n=========================================&quot;)</span><br><br><br><span class="hljs-comment"># 二、语气与写作风格调整</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">将以下文本翻译成商务信函的格式: </span><br><span class="hljs-string">```小老弟，我小羊，上回你说咱部门要采购的显示器是多少寸来着？```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><br><span class="hljs-comment"># 三、文件格式转换</span><br>data_json = &#123; <span class="hljs-string">&quot;resturant employees&quot;</span> :[ <br>    &#123;<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Shyam&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>:<span class="hljs-string">&quot;shyamjaiswal@gmail.com&quot;</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>:<span class="hljs-string">&quot;bob32@gmail.com&quot;</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Jai&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>:<span class="hljs-string">&quot;jai87@gmail.com&quot;</span>&#125;<br>]&#125;<br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">将以下Python字典从JSON转换为HTML表格，保留表格标题和列名：<span class="hljs-subst">&#123;data_json&#125;</span></span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><span class="hljs-comment"># from IPython.display import display, Markdown, Latex, HTML, JSON</span><br><span class="hljs-comment"># display(HTML(response))</span><br><br><br><span class="hljs-comment"># 四、拼写及语法纠正</span><br>text = [ <br>  <span class="hljs-string">&quot;The girl with the black and white puppies have a ball.&quot;</span>,  <span class="hljs-comment"># The girl has a ball.</span><br>  <span class="hljs-string">&quot;Yolanda has her notebook.&quot;</span>, <span class="hljs-comment"># ok</span><br>  <span class="hljs-string">&quot;Its going to be a long day. Does the car need it’s oil changed?&quot;</span>,  <span class="hljs-comment"># Homonyms</span><br>  <span class="hljs-string">&quot;Their goes my freedom. There going to bring they’re suitcases.&quot;</span>,  <span class="hljs-comment"># Homonyms</span><br>  <span class="hljs-string">&quot;Your going to need you’re notebook.&quot;</span>,  <span class="hljs-comment"># Homonyms</span><br>  <span class="hljs-string">&quot;That medicine effects my ability to sleep. Have you heard of the butterfly affect?&quot;</span>, <span class="hljs-comment"># Homonyms</span><br>  <span class="hljs-string">&quot;This phrase is to cherck chatGPT for spelling abilitty&quot;</span>  <span class="hljs-comment"># spelling</span><br>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(text)):<br>    time.sleep(<span class="hljs-number">20</span>)<br>    prompt = <span class="hljs-string">f&quot;&quot;&quot;请校对并更正以下文本，注意纠正文本保持原始语种，无需输出原始文本。</span><br><span class="hljs-string">    如果您没有发现任何错误，请说“未发现错误”。</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    例如：</span><br><span class="hljs-string">    输入：I are happy.</span><br><span class="hljs-string">    输出：I am happy.</span><br><span class="hljs-string">    ```<span class="hljs-subst">&#123;text[i]&#125;</span>```&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># response = get_completion(prompt)</span><br>    <span class="hljs-comment"># print(i, response)</span><br><br><br><span class="hljs-comment"># 语法纠错的简单示例</span><br>    text = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">Got this for my daughter for her birthday cuz she keeps taking \</span><br><span class="hljs-string">mine from my room.  Yes, adults also like pandas too.  She takes \</span><br><span class="hljs-string">it everywhere with her, and it&#x27;s super soft and cute.  One of the \</span><br><span class="hljs-string">ears is a bit lower than the other, and I don&#x27;t think that was \</span><br><span class="hljs-string">designed to be asymmetrical. It&#x27;s a bit small for what I paid for it \</span><br><span class="hljs-string">though. I think there might be other options that are bigger for \</span><br><span class="hljs-string">the same price.  It arrived a day earlier than expected, so I got \</span><br><span class="hljs-string">to play with it myself before I gave it to my daughter.</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>prompt = <span class="hljs-string">f&quot;校对并更正以下商品评论：```<span class="hljs-subst">&#123;text&#125;</span>```&quot;</span><br>response = get_completion(prompt)<br><span class="hljs-built_in">print</span>(response)<br><br><span class="hljs-comment"># 引入 Redlines 包，详细显示并对比纠错过程：</span><br><span class="hljs-keyword">from</span> redlines <span class="hljs-keyword">import</span> Redlines<br><span class="hljs-keyword">from</span> IPython.display <span class="hljs-keyword">import</span> display, Markdown<br><br>diff = Redlines(text,response)<br>display(Markdown(diff.output_markdown))<br><br><br><span class="hljs-comment"># 五、综合样例</span><br><span class="hljs-comment"># 使用一个Prompt，同时对一段文本进行翻译、拼写纠正、语气调整和格式转换等操作。</span><br>prod_review = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">这个熊猫公仔是我给女儿的生日礼物，她很喜欢，去哪都带着。</span><br><span class="hljs-string">公仔很软，超级可爱，面部表情也很和善。但是相比于价钱来说，</span><br><span class="hljs-string">它有点小，我感觉在别的地方用同样的价钱能买到更大的。</span><br><span class="hljs-string">快递比预期提前了一天到货，所以在送给女儿之前，我自己玩了会。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">针对以下三个反引号之间的英文评论文本，</span><br><span class="hljs-string">首先进行拼写及语法纠错，</span><br><span class="hljs-string">然后将其转化成中文，</span><br><span class="hljs-string">再将其转化成优质淘宝评论的风格，从各种角度出发，分别说明产品的优点与缺点，并进行总结。</span><br><span class="hljs-string">润色一下描述，使评论更具有吸引力。</span><br><span class="hljs-string">输出结果格式为：</span><br><span class="hljs-string">【优点】xxx</span><br><span class="hljs-string">【缺点】xxx</span><br><span class="hljs-string">【总结】xxx</span><br><span class="hljs-string">注意，只需填写xxx部分，并分段输出。</span><br><span class="hljs-string">将结果输出成Markdown格式。</span><br><span class="hljs-string">```<span class="hljs-subst">&#123;prod_review&#125;</span>```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>response = get_completion(prompt)<br>display(Markdown(response))<br></code></pre></td></tr></table></figure>

<h2 id="07-文本扩展"><a href="#07-文本扩展" class="headerlink" title="07.文本扩展"></a>07.文本扩展</h2><p>​	负责任和有益的方式开发应用语言模型！</p>
<p>​	<strong>文本扩展</strong>是大语言模型的一个重要应用方向，它可以输入简短文本，生成更加丰富的长文。这为创作提供了强大支持，但也可能被滥用。因此开发者在使用时，必须谨记社会责任，避免生成有害内容。</p>
<p>​	下面是<strong>基于 OpenAI API 实现一个客户邮件自动生成的示例</strong>，用于<strong>根据客户反馈优化客服邮件</strong>。这里还会介绍“温度”（temperature）这一超参数，它可以<strong>控制文本生成的多样性</strong>。</p>
<p>​	温度（temperature）参数可以控制语言模型生成文本的随机性。温度为0时，每次使用同样的 Prompt，得到的结果总是一致的【也可能不一致】。而在下面的样例中，当温度设为0.7时，则每次执行都会生成不同的文本。</p>
<p>虽然从理论上讲，temperature&#x3D;0 应该代表“贪婪搜索”（Greedy Search），即每次都选择概率最高的那一个词（Token），但实际上，由于底层架构和工程实现的原因，它并不能保证 <strong>100%</strong> 的一致性。</p>
<p>以下是导致这一现象的 <strong>4 个核心原因</strong>：</p>
<h5 id="1-浮点数计算的随机性-Floating-Point-Arithmetic"><a href="#1-浮点数计算的随机性-Floating-Point-Arithmetic" class="headerlink" title="1. 浮点数计算的随机性 (Floating Point Arithmetic)"></a>1. 浮点数计算的随机性 (Floating Point Arithmetic)</h5><p>这是最底层、最物理的原因。</p>
<ul>
<li><strong>并行计算</strong>：大模型是在成千上万个 GPU 上并行运行的。在神经网络的加法运算中，由于<strong>浮点数加法不满足结合律</strong>（即 $(A + B) + C$ 不一定等于 $A + (B + C)$），计算顺序的微小改变会导致结果最后几位的精度差异。</li>
<li><strong>累积效应</strong>：虽然这个差异极小（比如 $10^{-7}$），但经过大模型上百层的非线性激活函数放大后，可能会让两个 Token 的概率发生逆转（例如 Token A 从 0.3500001 变成 0.3499999，而 Token B 变成了 0.3500000）。</li>
</ul>
<h5 id="2-GPU-算子的非确定性-Nondeterministic-CUDA-Kernels"><a href="#2-GPU-算子的非确定性-Nondeterministic-CUDA-Kernels" class="headerlink" title="2. GPU 算子的非确定性 (Nondeterministic CUDA Kernels)"></a>2. GPU 算子的非确定性 (Nondeterministic CUDA Kernels)</h5><p>大模型依赖 NVIDIA 的 CUDA 库来运行。</p>
<ul>
<li>为了追求极致的计算速度，某些底层算法（如 <code>atomicAdd</code>）在多个线程同时写入同一个内存地址时，<strong>写入的先后顺序是随机的</strong>。</li>
<li>这种微秒级的顺序差异会直接改变该层输出的数值，最终影响下一个 Token 的预测概率。</li>
</ul>
<h5 id="3-服务器端架构：混合专家模型-MoE"><a href="#3-服务器端架构：混合专家模型-MoE" class="headerlink" title="3. 服务器端架构：混合专家模型 (MoE)"></a>3. 服务器端架构：混合专家模型 (MoE)</h5><p>如果你使用的是 GPT-4 或类似的大规模模型，它们通常采用 <strong>MoE (Mixture of Experts)</strong> 架构。</p>
<ul>
<li><strong>路由随机性</strong>：当用户请求发送到服务器时，系统会将任务分配给不同的“专家”子网络。</li>
<li><strong>负载均衡</strong>：如果某个专家网络正忙，路由可能会产生极其细微的偏差。这种分布式系统的调度过程，本身就带有一定的不可控性。</li>
</ul>
<h5 id="4-外部因素：采样截断与缓存-Caching"><a href="#4-外部因素：采样截断与缓存-Caching" class="headerlink" title="4. 外部因素：采样截断与缓存 (Caching)"></a>4. 外部因素：采样截断与缓存 (Caching)</h5><ul>
<li><strong>Top-p &#x2F; Top-k 干扰</strong>：虽然你设置了 <code>temperature=0</code>，但如果 API 同时开启了 <code>top_p</code> 等其他采样参数，可能会在极端情况下干扰选择。</li>
<li><strong>系统级缓存</strong>：大模型服务商（如 OpenAI）为了节省成本，会对常见的请求进行缓存。如果缓存策略发生变动，或者你微调了 Prompt 里的一个空格，都可能触发不同的处理路径。</li>
</ul>
<h5 id="💡-产品经理（PM）的应对策略"><a href="#💡-产品经理（PM）的应对策略" class="headerlink" title="💡 产品经理（PM）的应对策略"></a>💡 产品经理（PM）的应对策略</h5><p>作为 PM，在设计基于大模型的产品时，不能假设模型是“函数式”的（输入 A 永远得到 B）。应该采取以下“鲁棒性”设计：</p>
<ol>
<li><p>设置 seed 参数：</p>
<p>部分 API（如 OpenAI）支持 seed 参数。通过固定种子值，模型会尽力保证结果的一致性（虽然仍不是 100%）。</p>
</li>
<li><p>结果校验逻辑：</p>
<p>在模型输出后，增加一层解析器（Parser）或验证层。如果是为了对应聘者展示能力，可以多跑几次（n&gt;3），选择最稳定、最符合逻辑的版本。</p>
</li>
<li><p>Prompt 鲁棒性：</p>
<p>在 Prompt 中加入 “Chain of Thought” (思维链)，引导模型先输出思考过程，再输出结论。这能显著降低因为随机性导致的错误率。</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 一、定制化客户邮件</span><br><span class="hljs-comment"># 将根据客户的评价和其中的情感倾向，使用大语言模型针对性地生成回复邮件。</span><br><span class="hljs-keyword">from</span> tool <span class="hljs-keyword">import</span> get_completion<br><br><span class="hljs-comment"># 我们可以在推理那章学习到如何对一个评论判断其情感倾向</span><br>sentiment = <span class="hljs-string">&quot;消极的&quot;</span><br><br><span class="hljs-comment"># 一个产品的评价</span><br>review = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">他们在11月份的季节性销售期间以约49美元的价格出售17件套装，折扣约为一半。\</span><br><span class="hljs-string">但由于某些原因（可能是价格欺诈），到了12月第二周，同样的套装价格全都涨到了70美元到89美元不等。\</span><br><span class="hljs-string">11件套装的价格也上涨了大约10美元左右。\</span><br><span class="hljs-string">虽然外观看起来还可以，但基座上锁定刀片的部分看起来不如几年前的早期版本那么好。\</span><br><span class="hljs-string">不过我打算非常温柔地使用它，例如，\</span><br><span class="hljs-string">我会先在搅拌机中将像豆子、冰、米饭等硬物研磨，然后再制成所需的份量，\</span><br><span class="hljs-string">切换到打蛋器制作更细的面粉，或者在制作冰沙时先使用交叉切割刀片，然后使用平面刀片制作更细/不粘的效果。\</span><br><span class="hljs-string">制作冰沙时，特别提示：\</span><br><span class="hljs-string">将水果和蔬菜切碎并冷冻（如果使用菠菜，则轻轻煮软菠菜，然后冷冻直到使用；\</span><br><span class="hljs-string">如果制作果酱，则使用小到中号的食品处理器），这样可以避免在制作冰沙时添加太多冰块。\</span><br><span class="hljs-string">大约一年后，电机发出奇怪的噪音，我打电话给客服，但保修已经过期了，所以我不得不再买一个。\</span><br><span class="hljs-string">总的来说，这些产品的总体质量已经下降，因此它们依靠品牌认可和消费者忠诚度来维持销售。\</span><br><span class="hljs-string">货物在两天内到达。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-comment"># 首先明确大语言模型的身份是客户服务 AI 助手；它任务是为客户发送电子邮件回复；然后在三个反引号间给出具体的客户评论；</span><br><span class="hljs-comment"># 最后要求语言模型根据这条反馈邮件生成一封回复，以感谢客户的评价。</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">你是一位客户服务的AI助手。</span><br><span class="hljs-string">你的任务是给一位重要客户发送邮件回复。</span><br><span class="hljs-string">根据客户通过“```”分隔的评价，生成回复以感谢客户的评价。提醒模型使用评价中的具体细节</span><br><span class="hljs-string">用简明而专业的语气写信。</span><br><span class="hljs-string">作为“AI客户代理”签署电子邮件。</span><br><span class="hljs-string">客户评论：</span><br><span class="hljs-string">```<span class="hljs-subst">&#123;review&#125;</span>```</span><br><span class="hljs-string">评论情感：<span class="hljs-subst">&#123;sentiment&#125;</span></span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># response = get_completion(prompt)</span><br><span class="hljs-comment"># print(response)</span><br><br><br><span class="hljs-comment"># 二、引入温度系数</span><br><span class="hljs-comment"># “温度”(temperature) 参数可以控制生成文本的随机性和多样性。</span><br><span class="hljs-comment"># temperature 的值越大，语言模型输出的多样性越大；temperature 的值越小，输出越倾向高概率的文本。</span><br><span class="hljs-comment"># 一般来说，如果需要可预测、可靠的输出，则将 temperature 设置为0，在所有课程中，我们一直设置温度为零；</span><br><span class="hljs-comment"># 如果需要更具创造性的多样文本，那么适当提高 temperature 则很有帮助。</span><br><span class="hljs-comment"># 第一次运行</span><br>prompt = <span class="hljs-string">f&quot;&quot;&quot;</span><br><span class="hljs-string">你是一名客户服务的AI助手。</span><br><span class="hljs-string">你的任务是给一位重要的客户发送邮件回复。</span><br><span class="hljs-string">根据通过“```”分隔的客户电子邮件生成回复，以感谢客户的评价。</span><br><span class="hljs-string">如果情感是积极的或中性的，感谢他们的评价。</span><br><span class="hljs-string">如果情感是消极的，道歉并建议他们联系客户服务。</span><br><span class="hljs-string">请确保使用评论中的具体细节。</span><br><span class="hljs-string">以简明和专业的语气写信。</span><br><span class="hljs-string">以“AI客户代理”的名义签署电子邮件。</span><br><span class="hljs-string">客户评价：```<span class="hljs-subst">&#123;review&#125;</span>```</span><br><span class="hljs-string">评论情感：<span class="hljs-subst">&#123;sentiment&#125;</span></span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>response = get_completion(prompt, temperature=<span class="hljs-number">0.7</span>)<br><span class="hljs-built_in">print</span>(response)<br></code></pre></td></tr></table></figure>

<h2 id="08聊天机器人"><a href="#08聊天机器人" class="headerlink" title="08聊天机器人"></a>08聊天机器人</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 1.讲笑话</span><br><span class="hljs-keyword">from</span> doctest <span class="hljs-keyword">import</span> OutputChecker<br><span class="hljs-keyword">from</span> tool <span class="hljs-keyword">import</span> get_completion_from_messages<br>messages =  [  <br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;system&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">&#x27;你是一个像莎士比亚一样说话的助手。&#x27;</span>&#125;,    <br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">&#x27;给我讲个笑话&#x27;</span>&#125;,   <br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;assistant&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">&#x27;鸡为什么过马路&#x27;</span>&#125;,   <br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">&#x27;我不知道&#x27;</span>&#125;  ]<br><span class="hljs-comment"># response = get_completion_from_messages(messages, temperature=1)</span><br><span class="hljs-comment"># print(response)</span><br><br><br><span class="hljs-comment"># 2.友好的聊天机器人</span><br>messages =  [  <br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;system&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">&#x27;你是个友好的聊天机器人。&#x27;</span>&#125;,    <br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">&#x27;Hi, 我是Isa。&#x27;</span>&#125;  ]<br><span class="hljs-comment"># response = get_completion_from_messages(messages, temperature=1)</span><br><span class="hljs-comment"># print(response)</span><br><br><span class="hljs-comment"># 二、构建上下文</span><br><br><span class="hljs-comment"># 每次与语言模型的交互都互相独立，这意味着我们必须提供所有相关的消息，以便模型在当前对话中进行引用。</span><br><span class="hljs-comment"># 如果想让模型引用或 “记住” 对话的早期部分，则必须在模型的输入中提供早期的交流。我们将其称为上下文 (context) 。</span><br>messages =  [  <br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;system&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">&#x27;你是个友好的聊天机器人。&#x27;</span>&#125;,    <br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">&#x27;好，你能提醒我，我的名字是什么吗？&#x27;</span>&#125;  ]<br><span class="hljs-comment"># response = get_completion_from_messages(messages, temperature=1)</span><br><span class="hljs-comment"># print(response)</span><br><span class="hljs-comment"># Output:</span><br><span class="hljs-comment"># 抱歉，不知道您的名字</span><br><span class="hljs-comment"># 中文</span><br>messages =  [  <br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;system&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">&#x27;你是个友好的聊天机器人。&#x27;</span>&#125;,<br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">&#x27;Hi, 我是Isa&#x27;</span>&#125;,<br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;assistant&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Hi Isa! 很高兴认识你。今天有什么可以帮到你的吗?&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">&#x27;是的，你可以提醒我, 我的名字是什么?&#x27;</span>&#125;  ]<br><span class="hljs-comment"># response = get_completion_from_messages(messages, temperature=1)</span><br><span class="hljs-comment"># print(response)</span><br><span class="hljs-comment"># 当然可以! 你的名字是Isa。还有其他我可以帮助你的吗?</span><br><br><span class="hljs-comment"># 三、订餐机器人</span><br><span class="hljs-comment"># 1.构建机器人</span><br><span class="hljs-comment"># 如何构建一个 “点餐助手机器人”。这个机器人将被设计为自动收集用户信息，并接收来自比萨饼店的订单。</span><br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 导入必要的库和模块</span><br><span class="hljs-keyword">import</span> panel <span class="hljs-keyword">as</span> pn  <span class="hljs-comment"># 用于创建交互式仪表板</span><br><span class="hljs-keyword">from</span> tool <span class="hljs-keyword">import</span> get_completion_from_messages  <span class="hljs-comment"># 自定义工具函数，用于获取消息回复</span><br>pn.extension()  <span class="hljs-comment"># 启用Panel扩展，以使用其交互式组件</span><br>pn.extension(raw_css=[<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    .assistant-row &#123;</span><br><span class="hljs-string">        background-color: #F6F6F6;    # 设置助手回复行的背景颜色为浅灰色</span><br><span class="hljs-string">        padding: 8px;                            # 设置内边距为8像素</span><br><span class="hljs-string">        border-radius: 4px;                  # 设置边框圆角为4像素</span><br><span class="hljs-string">        width: 700px;                           # 设置宽度为700像素</span><br><span class="hljs-string">    &#125;</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>])<br>panels = [] <span class="hljs-comment"># 这是一个用来收集显示组件的空列表，稍后你会将聊天记录、用户消息和助手的回复添加到这个列表中</span><br><br>context = [&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;system&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">你是订餐机器人，为披萨餐厅自动收集订单信息。</span><br><span class="hljs-string">你要首先问候顾客。然后等待用户回复收集订单信息。收集完信息需确认顾客是否还需要添加其他内容。</span><br><span class="hljs-string">最后需要询问是否自取或外送，如果是外送，你要询问地址。</span><br><span class="hljs-string">最后告诉顾客订单总金额，并送上祝福。</span><br><span class="hljs-string"></span><br><span class="hljs-string">请确保明确所有选项、附加项和尺寸，以便从菜单中识别出该项唯一的内容。</span><br><span class="hljs-string">你的回应应该以简短、非常随意和友好的风格呈现。</span><br><span class="hljs-string"></span><br><span class="hljs-string">菜单包括：</span><br><span class="hljs-string"></span><br><span class="hljs-string">菜品：</span><br><span class="hljs-string">意式辣香肠披萨（大、中、小） 12.95、10.00、7.00</span><br><span class="hljs-string">芝士披萨（大、中、小） 10.95、9.25、6.50</span><br><span class="hljs-string">茄子披萨（大、中、小） 11.95、9.75、6.75</span><br><span class="hljs-string">薯条（大、小） 4.50、3.50</span><br><span class="hljs-string">希腊沙拉 7.25</span><br><span class="hljs-string"></span><br><span class="hljs-string">配料：</span><br><span class="hljs-string">奶酪 2.00</span><br><span class="hljs-string">蘑菇 1.50</span><br><span class="hljs-string">香肠 3.00</span><br><span class="hljs-string">加拿大熏肉 3.50</span><br><span class="hljs-string">AI酱 1.50</span><br><span class="hljs-string">辣椒 1.00</span><br><span class="hljs-string"></span><br><span class="hljs-string">饮料：</span><br><span class="hljs-string">可乐（大、中、小） 3.00、2.00、1.00</span><br><span class="hljs-string">雪碧（大、中、小） 3.00、2.00、1.00</span><br><span class="hljs-string">瓶装水 5.00</span><br><span class="hljs-string">&quot;&quot;&quot;</span>&#125; ]  <span class="hljs-comment"># 包含系统初始设置的字典列表。系统消息是定义机器人的行为规则、问候语、菜单等的地方。上下文会随着用户输入不断更新</span><br><br><br>inp = pn.widgets.TextInput(value=<span class="hljs-string">&quot;Hi&quot;</span>, placeholder=<span class="hljs-string">&#x27;Enter text here…&#x27;</span>)<span class="hljs-comment"># 文本输入框，用户可以在这里输入消息</span><br>button_conversation = pn.widgets.Button(name=<span class="hljs-string">&quot;Chat!&quot;</span>)<span class="hljs-comment"># 点击这个按钮会触发收集消息并生成回复的过程。</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">collect_messages</span>(<span class="hljs-params">_</span>):<br>    <span class="hljs-comment"># 声明使用全局变量context</span><br>    <span class="hljs-keyword">global</span> context <br>    <span class="hljs-comment"># 获取用户输入的提示内容</span><br>    prompt = inp.value_input<br>    <span class="hljs-comment"># 清空输入框的值</span><br>    inp.value = <span class="hljs-string">&#x27;&#x27;</span><br>    <span class="hljs-comment"># 将用户的消息添加到对话上下文中，角色为&#x27;user&#x27;</span><br>    context.append(&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;prompt&#125;</span>&quot;</span>&#125;)<br>    <span class="hljs-comment"># 从对话上下文中获取AI助手的回复</span><br>    response = get_completion_from_messages(context) <br>    <span class="hljs-comment"># 将AI助手的回复添加到对话上下文中，角色为&#x27;assistant&#x27;</span><br>    context.append(&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;assistant&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;response&#125;</span>&quot;</span>&#125;)<br>    <span class="hljs-comment"># 添加用户消息的显示面板</span><br>    panels.append(<br>        pn.Row(<span class="hljs-string">&#x27;User:&#x27;</span>, pn.pane.Markdown(prompt, width=<span class="hljs-number">600</span>)))<br>    <span class="hljs-comment"># 添加AI助手回复的显示面板，并应用&#x27;assistant-row&#x27;样式</span><br>    panels.append(<br>    pn.Row(<br>        <span class="hljs-string">&#x27;Assistant:&#x27;</span>,<br>        pn.pane.Markdown(response, width=<span class="hljs-number">600</span>),<br>        css_classes=[<span class="hljs-string">&#x27;assistant-row&#x27;</span>]  <br>    )<br>)<br><br>    <span class="hljs-comment"># 返回包含所有消息面板的列布局</span><br>    <span class="hljs-keyword">return</span> pn.Column(*panels)<br><br><span class="hljs-comment"># 将 collect_messages 函数与按钮点击事件绑定。每当点击按钮时，collect_messages 会被调用</span><br>interactive_conversation = pn.bind(collect_messages, button_conversation)<br><br><span class="hljs-comment"># 构建仪表板，包含输入框、按钮和聊天面板</span><br>dashboard = pn.Column(<br>    inp,<br>    pn.Row(button_conversation),<br>    pn.panel(interactive_conversation, loading_indicator=<span class="hljs-literal">True</span>, height=<span class="hljs-number">300</span>),<br>)<br><br>dashboard.show()<br></code></pre></td></tr></table></figure>

<p>2.创建JSON摘要</p>
<p>要求模型创建一个json摘要 方便我们发送给订单系统</p>
<p>因此我们需要在上下文的基础上追加另一个系统消息，作为另一条指示 (instruction) 。我们说创建一个刚刚订单的 JSON 摘要，列出每个项目的价格，字段应包括：</p>
<p>披萨，包括尺寸</p>
<p>配料列表</p>
<p>饮料列表</p>
<p>辅菜列表，包括尺寸，</p>
<p>总价格。</p>
<p>此处也可以定义为用户消息，不一定是系统消息。</p>
<p>请注意，这里我们使用了一个较低的温度，因为对于这些类型的任务，我们希望输出相对可预测。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 这是将当前上下文复制一份，并添加一个新的系统消息，系统消息要求生成订单的 JSON 摘要</span><br>messages =  context.copy()<br>messages.append(<br>&#123;<span class="hljs-string">&#x27;role&#x27;</span>:<span class="hljs-string">&#x27;system&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>:<br><span class="hljs-string">&#x27;&#x27;&#x27;创建上一个食品订单的 json 摘要。\</span><br><span class="hljs-string">逐项列出每件商品的价格，字段应该是 1) 披萨，包括大小 2) 配料列表 3) 饮料列表，包括大小 4) 配菜列表包括大小 5) 总价</span><br><span class="hljs-string">你应该给我返回一个可解析的Json对象，包括上述字段&#x27;&#x27;&#x27;</span>&#125;,    <br>)<br><br><span class="hljs-keyword">from</span> tool <span class="hljs-keyword">import</span> get_completion_from_messages<br>response = get_completion_from_messages(messages, temperature=<span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(response)<br></code></pre></td></tr></table></figure>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/AI%E4%B8%8E%E6%8A%80%E6%9C%AF/" class="category-chain-item">AI与技术</a>
  
  
    <span>></span>
    
  <a href="/categories/AI%E4%B8%8E%E6%8A%80%E6%9C%AF/%E5%90%B4%E6%81%A9%E8%BE%BE%E9%9D%A2%E5%90%91%E5%BC%80%E5%8F%91%E8%80%85%E7%9A%84%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%89%8B%E5%86%8C-%E4%B8%80-%E9%9D%A2%E5%90%91%E5%BC%80%E5%8F%91%E8%80%85%E7%9A%84%E6%8F%90%E7%A4%BA%E5%B7%A5%E7%A8%8B/" class="category-chain-item">吴恩达面向开发者的大模型手册(一)面向开发者的提示工程</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Prompt/" class="print-no-link">#Prompt</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>吴恩达面向开发者的大模型手册(一)面向开发者的提示工程</div>
      <div>https://py0909.github.io/2025/10/01/AI与技术/吴恩达面向开发者的大模型手册(一)面向开发者的提示工程/吴恩达面向开发者的大模型手册(一)面向开发者的提示工程/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Peng Yue</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年10月1日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="NC - 非商业性使用">
                    <i class="iconfont icon-cc-nc"></i>
                  </span>
                </a>
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="SA - 相同方式共享">
                    <i class="iconfont icon-cc-sa"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/10/02/AI%E4%B8%8E%E6%8A%80%E6%9C%AF/%E5%90%B4%E6%81%A9%E8%BE%BE%E9%9D%A2%E5%90%91%E5%BC%80%E5%8F%91%E8%80%85%E7%9A%84%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%89%8B%E5%86%8C(%E4%B8%89)%E4%BD%BF%E7%94%A8LangChain%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/%E5%90%B4%E6%81%A9%E8%BE%BE%E9%9D%A2%E5%90%91%E5%BC%80%E5%8F%91%E8%80%85%E7%9A%84%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%89%8B%E5%86%8C(%E4%B8%89)%E4%BD%BF%E7%94%A8LangChain%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/" title="吴恩达面向开发者的大模型手册(三)使用LangChain开发应用程序">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">吴恩达面向开发者的大模型手册(三)使用LangChain开发应用程序</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <span>Peng Yue</span> <i class="iconfont icon-love"></i> <span>Product Manager</span> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    

  

</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
